const html=document.querySelector("html");let btnResult=document.querySelector(".form__resultBtn"),btnXo=document.querySelectorAll(".form-btn"),result=document.querySelector(".form__result"),btn1=document.querySelector(".form__btn1"),btn2=document.querySelector(".form__btn2"),massive=[],mass=[],xo=[],number=[],form=document.forms.form,carbohydrates=form.carbohydrates,totalWeight=form.totalWeight;function addInfo(){return btnXo.forEach((e=>{e.addEventListener("click",(t=>{btnXo.forEach((e=>{e.style.backgroundColor="rgb(239 246 231)"})),e.style.backgroundColor=" rgb(255, 213, 45)",xo.push(e.value),result.innerHTML="",t.preventDefault()}))})),!0}function pushValue(e){const t=parseFloat(carbohydrates.value),r=parseFloat(totalWeight.value);if(isNaN(t)||isNaN(r)||0===t||0===r)return result.textContent="Error: incorrect input",!1;if(mass.push(t),number.push(r),xo=parseInt(xo),0!==xo){const t=mass.reduce(((e,t)=>e+t),0);if(0===t)return!1;console.log(mass),console.log(number),console.log(xo);const r=t/xo*number.reduce(((e,t)=>e+t),0);massive.push(r);const o=massive.toString().split(",").map(Number),a=parseFloat(o.join(""));return isNaN(a)||a===1/0?(result.textContent="Error: undefined result",!1):(result.textContent="",result.textContent+=`${(a/100).toFixed(2)}`,e.preventDefault(),console.log(a),resetAll(),carbohydrates.style.border="1px solid rgb(124, 231, 241)",!0)}}function resetAll(){return massive=[],mass=[],xo=[],number=[],carbohydrates.value="",totalWeight.value="",btnXo.forEach((e=>{e.style.backgroundColor="rgb(239 246 231)",btnResult.setAttribute("disabled","")})),!0}function resetBtnValue(e){[].push(e.target.value)}addInfo(),btnResult.addEventListener("click",pushValue),btn1.addEventListener("click",resetBtnValue),btn2.addEventListener("click",resetBtnValue);let carbonRegExp=/^[0-9]{1,20}$/;carbohydrates.oninput=()=>{carbonRegExp.test(carbohydrates.value)?(carbohydrates.style.border="1px solid rgb(124, 231, 241)",carbohydrates.value>100?(carbohydrates.value=carbohydrates.value.slice(0,2),document.querySelector(".form__modal-carbon").classList.add("_active"),carbohydrates.style.border="1px solid red"):carbohydrates.value<1?(document.querySelector(".form__modal-carbon-second").classList.add("_active"),carbohydrates.style.border="1px solid red"):(document.querySelector(".form__modal-carbon").classList.remove("_active"),document.querySelector(".form__modal-carbon-second").classList.remove("_active"))):carbohydrates.style.border="1px solid red"};let totalRegExp=/^[0-9]{2,20}$/;totalWeight.oninput=()=>{let e=totalRegExp.test(totalWeight.value);totalWeight.style.border=e?"1px solid rgb(124, 231, 241)":"1px solid red"};const checking=()=>btnResult.disabled=carbohydrates.value.length<1||carbohydrates.value>100||carbohydrates.value<1||totalWeight.value.length<2||"rgb(255, 213, 45)"!==btn1.style.backgroundColor&"rgb(255, 213, 45)"!==btn2.style.backgroundColor;carbohydrates.addEventListener("input",checking),totalWeight.addEventListener("input",checking),btn1.addEventListener("click",checking),btn2.addEventListener("click",checking),html.addEventListener("click",(function(e){"HTML"===e.target.tagName&&"BODY"!=!e.target.tagName||(document.querySelector(".form__modal-carbon").classList.remove("_active"),document.querySelector(".form__modal-carbon-second").classList.remove("_active"))}));